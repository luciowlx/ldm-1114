# 阶段1：ALIGN（数据详情预览-数据切换查看）

## 背景与目标
- 背景：单次上传的数据集可能包含多个文件（或子数据集），在数据详情页需要支持在相同 Schema 下的多子集快速切换预览与统计。
- 目标：在 DataDetailFullPage 前端原型中，增加“数据子集切换（主文件/文件-2/文件-3）”，联动更新表格渲染、缺失/唯一值统计与总记录数。

## 项目上下文分析
- 技术栈：React + TypeScript + Vite + Tailwind + Radix UI；仅前端模拟数据，不接触后端。
- 现有组件：DataDetailFullPage.tsx 已具备数据概览、数据表预览、缺失分析可视化切换与过滤逻辑；mockData 为泰坦尼克示例数据。
- 相关参考：DataPreprocessing.tsx 与 TaskManagement.tsx 中存在多数据集选择/切换逻辑，可复用“选中项触发预览刷新”的思路。

## 原始需求
用户输入：数据详情预览，增加数据切换查看，因为单个数据集上传时，可能会上传多个数据。

## 任务边界与范围
- 仅在前端原型中模拟多子数据集切换，不涉及真实后端数据源。
- 保持字段 Schema 一致，保证过滤与统计逻辑无须额外适配。
- 不改动版本历史与失败日志等区域，仅联动“总记录数”与预览表格。

## 需求理解
- 在“数据表预览”卡片的头部加入 Chips 或按钮用于选择子数据集；默认选中“主文件”。
- 切换后：previewRows 更新为对应子集；过滤状态重置；统计（总行数、列缺失率/唯一值）基于 previewRows 重新计算。

## 疑问澄清（当前已自决）
- 子数据集来源：本次仅使用 mockData 的变体作为演示；具体文件名与数量后续可由上传流程注入。
- 可视化联动范围：本次联动数据表预览与缺失分析统计；版本历史与元信息暂不联动。

## 智能决策策略
- 复用现有统计/过滤函数，最小侵入式改造，将所有 mockData 读写替换为 previewRows。
- 统一在组件内维护 activeSubDatasetId 与 previewRows；切换时重置过滤状态，避免旧状态影响新数据。

## 风险与假设
- 假设所有子数据集与主数据集字段完全一致；若未来不一致需引入字段对齐与兼容策略。
- 多子集数量随上传而变，当前演示固定为 3 个以便 UI 测试。

## 验收标准（对齐版）
1. 表头显示“数据子集”切换控件，可在主文件/文件-2/文件-3之间切换。
2. 总记录数与列缺失/唯一标签中的总行数显示均随切换动态更新。
3. 缺失值/唯一值过滤在切换后仍正确工作；字段选择器与标签点击能够触发过滤。
4. 在浏览器预览无控制台报错，交互稳定。

## 当前状态
- 作为原型迭代，无需后端；将根据预览效果在 DESIGN/TASK 文档细化。